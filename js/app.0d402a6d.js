(function(t){function e(e){for(var o,i,s=e[0],c=e[1],u=e[2],l=0,f=[];l<s.length;l++)i=s[l],r[i]&&f.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);d&&d(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},r={app:0},a=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var d=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("64a9"),r=n.n(o);r.a},"0681":function(t,e,n){"use strict";var o=n("c853"),r=n.n(o);r.a},1873:function(t,e,n){},2562:function(t,e,n){},"28b7":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i=(n("034f"),n("2877")),s={},c=Object(i["a"])(s,r,a,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,d=n("8c4f"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home container"},[t._m(0),n("div",{staticClass:"menu-container"},[n("HomeMenu")],1)])},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title-container"},[n("h1",{staticClass:"title"},[t._v("Koup")])])}],m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-menu"},[t.showJoinGameInput?[n("div",{staticClass:"join-container"},[n("div",{staticClass:"item"},[n("button",{staticClass:"menu-btn-small",on:{click:t.unTryJoinGame}},[n("i",{staticClass:"fas fa-chevron-left"})])]),n("div",{staticClass:"item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.roomId,expression:"roomId"}],staticClass:"join-input",attrs:{placeholder:"Game ID",autofocus:""},domProps:{value:t.roomId},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.joinGame(e):null},input:function(e){e.target.composing||(t.roomId=e.target.value)}}})]),n("div",{staticClass:"item"},[n("button",{staticClass:"menu-btn",on:{click:t.joinGame}},[t._v("Join")])])])]:[n("div",{staticClass:"menu-container"},[n("div",{staticClass:"item"},[n("button",{staticClass:"menu-btn",on:{click:t.createGame}},[t._v("Create Game")])]),n("div",{staticClass:"item"},[n("button",{staticClass:"menu-btn",on:{click:t.tryJoinGame}},[t._v("Join Game")])])])]],2)},p=[],h=n("8785"),v=n("9530"),C=n.n(v);function _(){var t=Object(h["a"])(["mutation ($input: RoomActionInput!) {\n            joinChecker(input: $input) {\n              room {\n                key\n              }\n            }\n          }"]);return _=function(){return t},t}function b(){var t=Object(h["a"])(["mutation ($input: CreateRoomInput!) {\n          createRoom(input: $input) {\n            room {\n              key\n            }\n          }\n        }"]);return b=function(){return t},t}var y={data:function(){return{roomId:"",showJoinGameInput:!1}},methods:{createGame:function(){var t=this;this.$apollo.mutate({mutation:C()(b()),variables:{input:{}}}).then(function(e){console.log(e),t.roomId=e.data.createRoom.room.key,t.joinGame()}).catch(function(t){console.error(t),alert("An error has occurred.")})},joinGame:function(){var t=this;0!=this.roomId.length?this.$apollo.mutate({mutation:C()(_()),variables:{input:{roomKey:this.roomId}}}).then(function(e){t.$router.push({name:"room",params:{roomId:t.roomId}})}).catch(function(t){console.error(t),alert("An error has occurred.")}):alert("no room id")},tryJoinGame:function(){this.showJoinGameInput=!0},unTryJoinGame:function(){this.showJoinGameInput=!1}}},A=y,g=(n("6d04"),Object(i["a"])(A,m,p,!1,null,"13d9a3e0",null));g.options.__file="HomeMenu.vue";var I=g.exports,M={components:{HomeMenu:I}},$=M,w=(n("5cdb"),Object(i["a"])($,l,f,!1,null,"50e647aa",null));w.options.__file="Home.vue";var j=w.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"room"},[""!=t.currentRoomComponent?n(t.currentRoomComponent,{tag:"component",attrs:{roomId:t.roomId,userId:t.userId},on:{"change-room-component":t.changeRoomComponent}}):t._e()],1)},O=[],G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"room-lobby"},[n("div",{staticClass:"item"},[n("p",[t._v("Game ID:")]),n("h4",[t._v(t._s(t.roomId))])]),n("div",{staticClass:"item"},[n("p",[t._v("Number of Players:")]),n("h4",[t._v(t._s(t.numOfPlayers))])]),n("div",{staticClass:"item"},[n("button",{staticClass:"menu-btn",on:{click:t.sendStartGame}},[t._v("Start Game")])])])},S=[];function R(){var t=Object(h["a"])(["mutation ($input: RoomActionInput!) {\n          startRoom(input: $input) {\n            room {\n              key\n            }\n          }\n        }"]);return R=function(){return t},t}function x(){var t=Object(h["a"])(["query ($id: ID!) {\n        room(id: $id) {\n          state\n          players {\n            edges {\n              node {\n                id\n              }\n            }\n          }\n        }\n      }"]);return x=function(){return t},t}var E={props:["roomId","userId"],apollo:{room:{query:C()(x()),variables:function(){return{id:this.roomId}},result:function(t){this.numOfPlayers=t.data.room.players.edges.length,this.roomState=t.data.room.state},pollInterval:1e3}},data:function(){return{numOfPlayers:null,roomState:1}},methods:{sendStartGame:function(){this.$apollo.mutate({mutation:C()(R()),variables:{input:{roomKey:this.roomId}}}).catch(function(t){console.error(t),alert("An error has occurred.")})},startGame:function(){this.$emit("change-room-component","RoomGame")}},watch:{roomState:function(t,e){2==t&&this.startGame()}}},P=E,J=(n("871c"),Object(i["a"])(P,G,S,!1,null,"1c80ac74",null));J.options.__file="RoomLobby.vue";var N=J.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"room-game"},[n("div",{staticClass:"game-col"},[n("GameActions",{attrs:{coins:t.coins,cardsMode:t.cardsMode},on:{"set-coins":t.setCoins,"set-mode":t.setMode}})],1),n("div",{staticClass:"game-col"},[n("GameCards",{attrs:{cards:t.cards,cardsMode:t.cardsMode},on:{"clicked-card":t.clickedCard}})],1)])},q=[],L=(n("7514"),n("55dd"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"game-actions"},[n("GameActionsCoins",{staticClass:"action",attrs:{coins:t.coins},on:{"set-coins":t.setCoins}}),n("GameActionsCards",{staticClass:"action",attrs:{cardsMode:t.cardsMode},on:{"set-mode":t.setMode}})],1)}),D=[],U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"game-actions-coins"},[n("div",{staticClass:"coin-action-text"},[n("h2",[t._v("üí∞: "+t._s(t.coins))])]),n("div",{staticClass:"coin-action-buttons"},t._l(t.addCoinAmounts,function(e){return n("button",{key:e,staticClass:"coin-action-btn",attrs:{disabled:!t.canAddCoins(e)},on:{click:function(n){t.addCoins(e)}}},[t._v("\n        +"+t._s(e)+"\n    ")])}),0),n("div",{staticClass:"coin-action-buttons"},t._l(t.removeCoinAmounts,function(e){return n("button",{key:e,staticClass:"coin-action-btn",attrs:{disabled:!t.canRemoveCoins(e)},on:{click:function(n){t.removeCoins(e)}}},[t._v("\n        -"+t._s(e)+"\n    ")])}),0)])},H=[],K={props:["coins"],data:function(){return{addCoinAmounts:[1,2,3],removeCoinAmounts:[2,3,7]}},methods:{canAddCoins:function(t){return this.coins<10},canRemoveCoins:function(t){return 2==t||(3==t?this.coins>=3&&this.coins<10:this.coins>=t)},addCoins:function(t){this.canAddCoins(t)&&this.$emit("set-coins",this.coins+t)},removeCoins:function(t){if(this.canRemoveCoins(t)){var e=this.coins-t;this.$emit("set-coins",e>=0?e:0)}}}},V=K,B=(n("6861"),Object(i["a"])(V,U,H,!1,null,"0366a992",null));B.options.__file="GameActionsCoins.vue";var Q=B.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"game-actions-cards"},[t._l(t.actionsInfo,function(e){return[n("div",{staticClass:"card-action"},[n("button",{staticClass:"card-action-btn",on:{click:function(n){t.setMode(e.cardsMode)}}},[t._v("\n        "+t._s(e.text)),n("span",{directives:[{name:"show",rawName:"v-show",value:t.cardsMode==e.cardsMode,expression:"cardsMode == actionInfo.cardsMode"}]},[t._v(t._s(e.adjectiveSuffix))]),n("br"),t._v("\n        "+t._s(e.emoji)+"\n      ")])])]})],2)},z=[],F={props:["cardsMode"],data:function(){return{actionsInfo:{Swap:{cardsMode:"swap",text:"Swap",adjectiveSuffix:"ping",emoji:"üîÑ"},Kill:{cardsMode:"kill",text:"Kill",adjectiveSuffix:"ing",emoji:"üó°Ô∏è"},Reveal:{cardsMode:"reveal",text:"Reveal",adjectiveSuffix:"ing",emoji:"üí°"}}}},methods:{setMode:function(t){this.$emit("set-mode",t)}}},X=F,Y=(n("0681"),Object(i["a"])(X,W,z,!1,null,"a9a80e3e",null));Y.options.__file="GameActionsCards.vue";var Z=Y.exports,tt={components:{GameActionsCoins:Q,GameActionsCards:Z},props:["coins","cardsMode"],data:function(){return{}},methods:{setCoins:function(t){this.$emit("set-coins",t)},setMode:function(t){this.$emit("set-mode",t)}}},et=tt,nt=(n("b7f6"),Object(i["a"])(et,L,D,!1,null,"b32c6818",null));nt.options.__file="GameActions.vue";var ot=nt.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"game-cards"},t._l(t.cards,function(e){return n("GameCardsCard",{key:e.id,staticClass:"card",attrs:{card:e},on:{"clicked-card":t.clickedCard}})}),1)},at=[],it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"game-cards-card",on:{click:function(e){t.clickedCard(t.card.id)}}},[n("div",{staticClass:"card-content"},[t.card.hidden&&t.card.alive?n("p",[t._v("HIDDEN")]):n("p",[t._v(t._s(t.card.type))]),n("p",[t._v("üëë")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.card.selected,expression:"card.selected"}]},[t._v("SELECTED")]),n("p",{directives:[{name:"show",rawName:"v-show",value:!t.card.alive,expression:"!card.alive"}]},[t._v("DEAD")])])])},st=[],ct={props:["card"],methods:{clickedCard:function(t){this.$emit("clicked-card",t)}}},ut=ct,dt=(n("6f9b"),Object(i["a"])(ut,it,st,!1,null,"3a060f58",null));dt.options.__file="GameCardsCard.vue";var lt=dt.exports,ft={components:{GameCardsCard:lt},props:["cards","cardsMode"],methods:{clickedCard:function(t){this.$emit("clicked-card",t)}}},mt=ft,pt=(n("d547"),Object(i["a"])(mt,rt,at,!1,null,"328b3c8e",null));pt.options.__file="GameCards.vue";var ht=pt.exports;function vt(){var t=Object(h["a"])(["mutation ($input: PutCardsInput!) {\n                  revealCard(input: $input) {\n                    player {\n                      hand\n                    }\n                  }\n                }"]);return vt=function(){return t},t}function Ct(){var t=Object(h["a"])(["mutation ($input: PutCardsInput!) {\n                swapEnd(input: $input) {\n                  player {\n                    id\n                  }\n                }\n              }"]);return Ct=function(){return t},t}function _t(){var t=Object(h["a"])(["mutation ($input: GetCardsInput!) {\n              swapStart(input: $input) {\n                player {\n                  hand\n                }\n              }\n            }"]);return _t=function(){return t},t}function bt(){var t=Object(h["a"])(["query ($id: ID!) {\n        player(id: $id) {\n          hand\n        }\n      }"]);return bt=function(){return t},t}function yt(){var t=Object(h["a"])(["query {\n        allCards {\n          edges {\n            node {\n              dbId\n              type\n            }\n          }\n        }\n      }"]);return yt=function(){return t},t}var At={components:{GameActions:ot,GameCards:ht},props:["roomId","userId"],apollo:{allCards:{query:C()(yt()),manual:!0,skip:!0,result:function(t){for(var e=t.data.allCards.edges,n=0;n<e.length;++n){var o=e[n].node;this.cardsMap[o.dbId]=o.type}console.log(this.cardsMap),this.$apollo.queries.player.skip=!1,this.$apollo.queries.player.refetch()}},player:{query:C()(bt()),variables:function(){return{id:this.userId}},manual:!0,skip:!0,result:function(t){var e=t.data.player.hand,n=this.parseCards(e,{hidden:!0,alive:!0,selected:!1,owned:!0});this.cards=n}}},data:function(){return{cards:[],coins:2,cardsMode:"display",cardsMap:{}}},computed:{selectedCap:function(){return"display"==this.cardsMode?0:"swap"==this.cardsMode?this.cards.filter(function(t){return t.alive&&t.owned}).length:"kill"==this.cardsMode?1:"reveal"==this.cardsMode?1:void alert("An error has occurred.")},currentlySelectedAmount:function(){return this.cards.filter(function(t){return t.selected}).length}},created:function(){this.$apollo.queries.allCards.skip=!1,this.$apollo.queries.allCards.refetch()},methods:{parseCards:function(t,e){for(var n=[],o=0;o<t.length;++o){var r=JSON.parse(JSON.stringify(e)),a=t[o],i=this.cardsMap[a];r.id=a,r.type=i,n.push(r)}return n},setCoins:function(t){this.coins=t},setMode:function(t){var e=this;if("display"==this.cardsMode)"swap"==t?this.$apollo.mutate({mutation:C()(_t()),variables:{input:{id:this.userId,numCards:2}}}).then(function(n){var o=n.data.swapStart.player.hand.filter(function(t){return e.cards.reduce(function(e,n){return e&&t!=n.id},!0)}),r=e.parseCards(o,{hidden:!1,alive:!0,selected:!1,owned:!1});e.cards=e.cards.concat(r),e.cardsMode=t,e.unhideAll()}).catch(function(t){console.error(t),alert("An error has occurred.")}):"kill"==t?(this.unhideAll(),this.cardsMode=t):"reveal"==t?(this.unhideAll(),this.cardsMode=t):alert("An error has occurred.");else if(t==this.cardsMode)if("swap"==this.cardsMode){if(this.currentlySelectedAmount==this.selectedCap){var n=this.cards.filter(function(t){return!t.selected&&t.alive});console.log(n),this.$apollo.mutate({mutation:C()(Ct()),variables:{input:{id:this.userId,hand:n.map(function(t){return t.id})}}}).then(function(t){e.cards=e.cards.filter(function(t){return t.selected||!t.alive}),e.unselectAll(),e.hideAll(),e.ownAll(),e.cardsMode="display"}).catch(function(t){console.error(t),alert("An error has occurred.")})}}else if("kill"==this.cardsMode){if(0==this.currentlySelectedAmount)this.cardsMode="display",this.hideAll();else if(this.currentlySelectedAmount==this.selectedCap){for(var o=this.getSelectedCards(),r=0;r<o.length;++r)o[r].alive=!1,o[r].hidden=!1;this.unselectAll(),this.hideAll(),this.cardsMode="display"}}else if("reveal"==this.cardsMode){if(0==this.currentlySelectedAmount)this.cardsMode="display",this.hideAll();else if(this.currentlySelectedAmount==this.selectedCap){o=this.getSelectedCards();console.log("selectedCards"),console.log(o),console.log(o.map(function(t){return t.id})),this.$apollo.mutate({mutation:C()(vt()),variables:{input:{id:this.userId,hand:o.map(function(t){return t.id})}}}).then(function(t){if(console.log(JSON.stringify(t.data.revealCard.player.hand.sort(function(t,e){return t-e}))==JSON.stringify(e.cards.map(function(t){return t.id}).sort(function(t,e){return t-e}))),JSON.stringify(t.data.revealCard.player.hand.sort(function(t,e){return t-e}))!=JSON.stringify(e.cards.map(function(t){return t.id}).sort(function(t,e){return t-e})))for(var n=t.data.revealCard.player.hand.filter(function(t){return e.cards.reduce(function(e,n){return e&&t!=n.id},!0)}),o=e.parseCards(n,{hidden:!0,alive:!0,selected:!1,owned:!0}),r=e.cards.map(function(t,e){return t.selected?e:-1}).filter(function(t){return-1!=t}),a=0;a<r.length;++a){var i=r[a];e.cards.splice(i,1,o[a])}e.unselectAll(),e.hideAll(),e.cardsMode="display"}).catch(function(t){})}}else alert("An error has occurred.")},getSelectedCards:function(){return this.cards.filter(function(t){return t.selected})},doToAll:function(t,e){for(var n=0;n<this.cards.length;++n)this.cards[n][t]=e},unhideAll:function(){this.doToAll("hidden",!1)},hideAll:function(){this.doToAll("hidden",!0)},unselectAll:function(){this.doToAll("selected",!1)},ownAll:function(){this.doToAll("owned",!0)},clickedCard:function(t){var e=this.cards.find(function(e){return e.id==t});if("display"==this.cardsMode)e.hidden=!e.hidden;else if("swap"==this.cardsMode||"kill"==this.cardsMode||"reveal"==this.cardsMode){if(e.selected)return void(e.selected=!1);if(!e.alive)return;if(1==this.selectedCap)return this.unselectAll(),void(e.selected=!0);this.currentlySelectedAmount<this.selectedCap&&(e.selected=!0)}else alert("An error has occurred.")},swapCards:function(){}}},gt=At,It=(n("b1a8"),Object(i["a"])(gt,T,q,!1,null,"22f5f51c",null));It.options.__file="RoomGame.vue";var Mt=It.exports;function $t(){var t=Object(h["a"])(["mutation ($input: RoomActionInput!) {\n          joinRoom(input: $input) {\n            player {\n              id\n            }\n          }\n        }"]);return $t=function(){return t},t}var wt={components:{RoomLobby:N,RoomGame:Mt},props:["roomId"],data:function(){return{currentRoomComponent:"",userId:""}},created:function(){this.setup()},watch:{$route:function(t,e){this.currentRoomComponent,this.setup()}},methods:{setup:function(){var t=this;this.$apollo.mutate({mutation:C()($t()),variables:{input:{roomKey:this.roomId}}}).then(function(e){t.userId=e.data.joinRoom.player.id,t.currentRoomComponent="RoomLobby"}).catch(function(e){console.error(e),alert("An error has occurred."),t.$router.push({name:"home"})})},changeRoomComponent:function(t){this.currentRoomComponent=t}}},jt=wt,kt=(n("939d"),Object(i["a"])(jt,k,O,!1,null,"f15c258e",null));kt.options.__file="Room.vue";var Ot=kt.exports;o["a"].use(d["a"]);var Gt=new d["a"]({routes:[{path:"/",name:"home",component:j},{path:"/:roomId",name:"room",component:Ot,props:!0}]}),St=(n("96cf"),n("1da1"),n("be94")),Rt=n("522d"),xt=n("efe7");o["a"].use(Rt["a"]);var Et="apollo-token",Pt=Object({NODE_ENV:"production",VUE_APP_CLI_UI_URL:"",BASE_URL:""}).VUE_APP_GRAPHQL_HTTP||"https://koup-api.herokuapp.com/graphql",Jt={httpEndpoint:Pt,wsEndpoint:Object({NODE_ENV:"production",VUE_APP_CLI_UI_URL:"",BASE_URL:""}).VUE_APP_GRAPHQL_WS||null,tokenName:Et,persisting:!1,websocketsOnly:!1,ssr:!1};function Nt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(xt["createApolloClient"])(Object(St["a"])({},Jt,t)),n=e.apolloClient,o=e.wsClient;n.wsClient=o;var r=new Rt["a"]({defaultClient:n,defaultOptions:{$query:{}},errorHandler:function(t){console.log("%cError","background: red; color: white; padding: 2px 4px; border-radius: 3px; font-weight: bold;",t.message)}});return r}o["a"].config.productionTip=!1,new o["a"]({router:Gt,apolloProvider:Nt(),render:function(t){return t(u)}}).$mount("#app")},5840:function(t,e,n){},"597e":function(t,e,n){},"59a7":function(t,e,n){},"5bf0":function(t,e,n){},"5cdb":function(t,e,n){"use strict";var o=n("597e"),r=n.n(o);r.a},"64a9":function(t,e,n){},6861:function(t,e,n){"use strict";var o=n("1873"),r=n.n(o);r.a},"6d04":function(t,e,n){"use strict";var o=n("c981"),r=n.n(o);r.a},"6f9b":function(t,e,n){"use strict";var o=n("5840"),r=n.n(o);r.a},7603:function(t,e,n){},"871c":function(t,e,n){"use strict";var o=n("5bf0"),r=n.n(o);r.a},"939d":function(t,e,n){"use strict";var o=n("59a7"),r=n.n(o);r.a},b1a8:function(t,e,n){"use strict";var o=n("7603"),r=n.n(o);r.a},b7f6:function(t,e,n){"use strict";var o=n("28b7"),r=n.n(o);r.a},c853:function(t,e,n){},c981:function(t,e,n){},d547:function(t,e,n){"use strict";var o=n("2562"),r=n.n(o);r.a}});
//# sourceMappingURL=app.0d402a6d.js.map